<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Kurv</title>

        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" type="text/css" href="../css/style.css" />
        <link rel="stylesheet" href="https://use.typekit.net/erp8dea.css" />
        <!-- Gelica font -->
    </head>

    <body>
        <!-- Header and Footer code skeleton for all pages coded by Edda with help of AI for suggestions and bootstrap classes-->

        <header class="container">
            <div class="d-flex align-items-center justify-content-between py-3">
                <a href="../index.html?skipVideo=true" class="home-icon">
                    <img src="../img/home_button.svg" alt="Icon" />
                    <span>Startside</span>
                </a>

                <h1 class="jo-top-logo m-0 text-center">
                    <img src="../img/logo_header.png" alt="Juice Organic Logo" width="600" />
                </h1>

                <div style="width: 60px"></div>
            </div>
        </header>

        <!-- main goes here -->
        <main>
            <!-- scan JO dunk -->
            <div class="container">
                <a href="stilldindunk.html" class="btn btn-light btn-outline-light scan-bottle-btn mb-4">Scan din JuicOrganic Drikkedunk</a>
            </div>

            <!-- BASKET -->
            <div id="basket-container" class="container p-4">
                <div id="empty-basket" class="row">
                    <!-- if empty basket -->
                    <div class="col-12 text-center">
                        <img src="../img/kurv_icon.png" alt="Tom Kurv ikon" width="80" />
                        <p>Din kurv er tom</p>
                    </div>
                </div>
            </div>

            <div class="basket-items"></div>

            <!-- betal knap -->
            <div class="button-container d-flex justify-content-center">
                <a href="betal.html" class="btn btn-pay">Betal</a>
            </div>
        </main>

        <footer>
            <div class="container">
                <nav class="row p-3">
                    <div class="col-3">
                        <a href="../index.html?skipVideo=true" class="jo-footer-img-container" aria-label="Hjem">
                            <div class="jo-footer-img-container">
                                <img src="../img/home_icon.png" alt="Hjem" />
                            </div>
                        </a>
                    </div>
                    <div class="col-3">
                        <a href="drikkedunk.html" class="jo-footer-img-container" aria-label="Drikkedunk">
                            <div class="jo-footer-img-container">
                                <img src="../img/drikkedunk_icon.png" alt="Drikkedunk" />
                            </div>
                        </a>
                    </div>
                    <div class="col-3">
                        <a href="sortiment.html" class="jo-footer-img-container" aria-label="Sortiment">
                            <div class="jo-footer-img-container">
                                <img src="../img/sortiment_icon.png" alt="Sortiment" />
                            </div>
                        </a>
                    </div>
                    <div class="col-3">
                        <a href="#" class="jo-footer-img-container jo-footer-nav-active" aria-label="Kurv">
                            <div class="jo-footer-img-container">
                                <img src="../img/kurv_icon.png" alt="Kurv" />
                            </div>
                        </a>
                    </div>
                </nav>
            </div>
        </footer>

        <script>
            // Get cart data from localStorage or empty array if none
            const cartItems = JSON.parse(localStorage.getItem("cart")) || [];

            // remove empty basket if items in basket
            if (cartItems.length > 0) {
                const emptyBasketElement = document.querySelector("#empty-basket");
                emptyBasketElement.remove();

                const basketItemsContainer = document.querySelector("#basket-container");

                cartItems.forEach((cartItem) => {
                    // Row wrapper
                    const basketItemRow = document.createElement("div");
                    basketItemRow.className = "row jo-basketitem-row mb-4";

                    // Card/container
                    const basketItemCol = document.createElement("div");
                    basketItemCol.className = "col-12";

                    const basketItemCard = document.createElement("div");
                    basketItemCard.className = "card border-0 rounded-4 shadow-sm flex-row align-items-center p-3 jo-basketitem-card";

                    // Image
                    const basketItemImg = document.createElement("img");
                    basketItemImg.className = "jo-basketitem-img me-4";
                    basketItemImg.src = cartItem.imgUrl;
                    basketItemImg.alt = cartItem.title;

                    // Details
                    const basketItemDetail = document.createElement("div");
                    basketItemDetail.className = "flex-grow-1 jo-basketitem-detail";

                    const basketItemTitle = document.createElement("h4");
                    basketItemTitle.className = "jo-basketitem-title fw-bold mb-1";
                    basketItemTitle.textContent = cartItem.title;

                    const basketItemSize = document.createElement("p");
                    basketItemSize.className = "jo-basketitem-size mb-2";
                    basketItemSize.textContent = cartItem.size;

                    // Price
                    const basketItemPrice = document.createElement("p");
                    basketItemPrice.className = "jo-basketitem-price fw-bold";
                    basketItemPrice.innerHTML = `<strong>Dkk${cartItem.price}</strong>`;

                    // Controls
                    const basketItemControls = document.createElement("div");
                    basketItemControls.className = "btn-group jo-basketitem-controls ms-3";
                    basketItemControls.setAttribute("role", "group");
                    basketItemControls.setAttribute("aria-label", `${cartItem.size} tæller`);

                    const minus = document.createElement("button");
                    minus.className = "btn btn-outline-jo-accent jo-qty-btn jo-qty-minus";
                    minus.textContent = "−";

                    const count = document.createElement("button");
                    count.className = "btn jo-qty-btn jo-qty-count";
                    count.textContent = "0";
                    count.disabled = true;

                    const plus = document.createElement("button");
                    plus.className = "btn btn-outline-jo-primary jo-qty-btn jo-qty-plus";
                    plus.textContent = "+";

                    basketItemControls.append(minus, count, plus);

                    // Build card
                    basketItemDetail.append(basketItemTitle, basketItemSize, basketItemPrice);
                    basketItemCard.append(basketItemImg, basketItemDetail, basketItemControls);

                    basketItemCol.appendChild(basketItemCard);
                    basketItemRow.appendChild(basketItemCol);
                    basketItemsContainer.appendChild(basketItemRow);
                });
            }
        </script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="../app.js"></script>
    </body>
</html>
